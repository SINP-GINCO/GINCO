{% extends "IgnConfigurateurBundle::layout.html.twig" %}

{% block title %}
    {% trans %}Dictionnaire de données{% endtrans %}
{% endblock %}

{% block body %}
<div class="container">

    {# Breadcrumb #}
    <div class="row">

        <p class="help pull-right">
            <a target="_blank" href="{{ constant('Ign\\Bundle\\ConfigurateurBundle\\Constants\\Constants::DOCUMENTATION_URL') }}/configurateur/dictionnaire-donnees.html">
                <span class="glyphicon glyphicon-question-sign" aria-hidden="true"></span>
                Aide dictionnaire de données
            </a>
        </p>

        <ol class="breadcrumb">
            <li><a href="{{ path('configurateur_homepage') }}">{%trans %}breadcrumb.home{% endtrans %}</a></li>
            <li class="active">{%trans %}breadcrumb.data.index{% endtrans %}</li>
        </ol>
    </div>

    <div class="row">

        {# Flash messages #}
        {% for flashMessage in app.session.flashbag.get('notice') %}
            <div class="alert alert-success">
                {{ flashMessage }}
            </div>
        {% endfor %}
        {% for flashMessage in app.session.flashbag.get('error') %}
            <div class="alert alert-danger">
                {{ flashMessage }}
            </div>
        {% endfor %}

         <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 id="panel-title" class="panel-title">
                    {% trans %}data.title{% endtrans %}
                </h3>
            </div>
            <div class="panel-body">

                {# Add data entry button #}
                <a href="{{ path('configurateur_data_new') }}"
                   class="btn btn-default" role="button"> <span
                            class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                    {% trans %}data.add.button{% endtrans %}
                </a>
            </div>
            <div class="panel-body">
               {# Editable Data entities (non related to a Field) #}
                <h4>{% trans %}data.list.title.1{% endtrans %}</h4>

                {% set datas = editable %}
                {% set table_name = 'editable' %}
                {% include "IgnConfigurateurBundle:Data:data_table.html.twig" %}
            </div>
            <div class="panel-body">
                {# Non editable Data entities (related to at least one Field) #}
                <h4>{% trans %}data.list.title.2{% endtrans %}</h4>

                {% set datas = not_editable %}
                {% set table_name = 'not_editable' %}
                {% include "IgnConfigurateurBundle:Data:data_table.html.twig" %}
            </div>
        </div>

    </div>
</div>

<!-- The "show data" modal -->
<div class="modal fade" id="show-modal" tabindex="-1" role="dialog" aria-labelledby="showModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content"></div>
    </div>
</div>
<!-- /.modal -->
{% endblock body %}


{% block specificjavascripts %}
    {{ parent() }}

    <script>

        jQuery(document).ready(function() {
            // Enable tooltips
            $("[data-toggle=tooltip]").tooltip();

            //  Load content into the "show" modal
            $('[data-load-remote]').on('click',function(e) {
                e.preventDefault();
                var $this = $(this);
                var remote = $this.data('load-remote');
                if(remote) {
                    $($this.data('remote-target')).load(remote);
                }
            });
        });
    </script>

{%  endblock specificjavascripts %}

